\chapter{Law of Large Numbers}

% \begin{introduction}
%     \item Weak Law of Large Numbers
%     \item Strong Law of Large Numbers
%     \item Uniform Law of Large Numbers
% \end{introduction}

\section{Weak Law of Large Numbers}

\begin{lemma}
    If $p>0$ and $E\left|Z_{n}\right|^{p}\rightarrow 0$, then
    \begin{equation}
        Z_{n}\stackrel{p}{\rightarrow}0.
    \end{equation}
\end{lemma}

\begin{proof}

\end{proof}

\begin{theorem}[Weak Law of Large Numbers with Finite Variances]
    Let $X_1,X_2,\ldots$ be i.i.d. random variables with $EX_i=\mu$ and $\text{Var}(X_i)\leq C<\infty$. Suppose $S_n=X_1+X_2+\ldots+X_n$, then
    \begin{equation}
        S_n/n\stackrel{L^2}{\rightarrow}\mu,\quad S_n/n\stackrel{p}{\rightarrow}\mu.
    \end{equation}
\end{theorem}

\begin{proof}

\end{proof}

\begin{theorem}[Weak Law of Large Numbers without i.i.d.]
    Let $X_1,X_2,\ldots$ be random variables, Suppose $S_n=X_1+X_2+\ldots+X_n$, $\mu_n=ES_n$, $\sigma_n^2=\text{Var}(S_n)$, if $\sigma_n^2/b_n^2\rightarrow 0$, then
    \begin{equation}
        \frac{S_n-\mu_n}{b_n}\stackrel{p}{\rightarrow}0.
    \end{equation}
\end{theorem}

\begin{proof}

\end{proof}

\begin{theorem}[Weak Law of Large Numbers for Triangular Arrays]
    For each $n$, let $X_{n,m},1\leq m\leq n$, be independent random variables. Suppose $b_n>0$ with $b_n\rightarrow\infty$, $\bar{X}_{n,m}=X_{n,m}I_{\left(X_{n,m}\leq b_n\right)}$, if
    \begin{enumerate}
        \item $\sum_{m=1}^{n}P\left(\left|X_{n,m}\right|>b_{n}\right)\rightarrow 0$, and
        \item $b_{n}^{-2}\sum_{m=1}^{n}E\bar{X}_{n,m}^{2}\rightarrow 0$.
    \end{enumerate}
    Suppose $S_{n}=X_{n, 1}+\cdots+X_{n,n}$ and $a_{n}=\sum_{m=1}^{n}E\bar{X}_{n,m}$, then
    \begin{equation}
        \frac{S_n-a_n}{b_n}\stackrel{p}{\rightarrow}0.
    \end{equation}
\end{theorem}

\begin{proof}

\end{proof}

\begin{theorem}[Weak Law of Large Numbers by Feller]
    Let $X_1,X_2,\ldots$ be i.i.d. random variables with
    \begin{equation}
        \lim_{x\rightarrow 0}xP(|X_i|>x)=0.
    \end{equation}
    Suppose $S_n=X_1+X_2+\ldots+X_n$, $\mu_n=E\left(X_1I_{(|X_1|<n)}\right)$, then
    \begin{equation}
        S_n/n-\mu_n\stackrel{p}{\rightarrow}0.
    \end{equation}
\end{theorem}

\begin{proof}

\end{proof}

\begin{theorem}[Weak Law of Large Numbers] \label{thm:WLLN}
    Let $X_1,X_2,\ldots$ be i.i.d. random variables with $E|X_i|<\infty$. Suppose $S_n=X_1+X_2+\ldots+X_n$, $\mu=EX_i$, then
    \begin{equation}
        S_n/n\stackrel{p}{\rightarrow}\mu.
    \end{equation}
\end{theorem}

\begin{proof}

\end{proof}

\begin{remark}
    $E|X_i|=\infty$
\end{remark}

\section{Strong Law of Large Numbers}

\subsection{Borel-Cantelli Lemmas}

\begin{lemma}[Borel-Cantelli Lemma] \label{lem:borel-cantelli-lemma}
    If $\sum_{n=1}^{\infty}P\left(A_{n}\right)<\infty$, then
    \begin{equation}
        P\left(A_{n}\text{ i.o. }\right)=0.
    \end{equation}
\end{lemma}

\begin{lemma}[The Second Borel-Cantelli Lemma]
    If $\{A_n\}$ are independent with $\sum_{n=1}^{\infty}P\left(A_{n}\right)=\infty$, then,
    \begin{equation}
        P\left(A_{n}\text{ i.o. }\right)=1.
    \end{equation}
\end{lemma}

\begin{corollary}
    Suppose $\{A_{n}\}$ are independent with $P\left(A_{n}\right)<1,\forall n$. If $P\left(\cup_{n=1}^{\infty}A_{n}\right)=1$ then
    \begin{equation}
        \sum_{n=1}^{\infty}P\left(A_{n}\right)=\infty,
    \end{equation}
    and hence $P\left(A_{n}\text{ i.o. }\right)=1$
\end{corollary}

\begin{proof}

\end{proof}

\subsection{Strong Law of Large Numbers}

\begin{theorem}[Strong Law of Large Numbers] \label{thm:SLLN}
    Let $X_1,X_2,\ldots$ be i.i.d. random variables with $E|X_i|<\infty$. Suppose $S_n=X_1+X_2+\ldots+X_n$, $\mu=EX_i$, then
    \begin{equation}
        S_n/n\stackrel{a.s.}{\rightarrow}\mu.
    \end{equation}
\end{theorem}

\section{Uniform Law of Large Numbers}

\begin{theorem}[Uniform Law of Large Numbers] \label{thm:ULLN}
    Suppose
    \begin{enumerate}
        \item $\Theta$ is compact.
        \item $g\left(X_{i},\theta\right)$ is continuous at each $\theta\in\Theta$ almost sure.
        \item $g\left(X_{i},\theta\right)$ is dominated by a function $G\left(X_{i}\right)$, i.e. $\left|g\left(X_{i},\theta\right)\right|\leq G\left(X_{i}\right)$.
        \item $EG\left(X_{i}\right)<\infty$.
    \end{enumerate}
    Then
    \begin{equation}
        \sup_{\theta\in\Theta}\left|n^{-1}\sum_{i=1}^{n}g\left(X_{i},\theta\right)-Eg\left(X_{i},\theta\right)\right|\stackrel{p}{\rightarrow}0.
    \end{equation}
\end{theorem}

\begin{proof}
    Suppose
    \begin{equation*}
        \Delta_{\delta}\left(X_{i},\theta_{0}\right)=\sup_{\theta\in B\left(\theta_{0},\delta\right)}g\left(X_{i},\theta\right)-\inf_{\theta\in B\left(\theta_{0},\delta\right)}g\left(X_{i},\theta\right).
    \end{equation*}

    Since (i) $\Delta_{\delta}\left(X_{i},\theta_{0}\right)\stackrel{a.s.}{\rightarrow} 0$ by condition (2), (ii) $\Delta_{\delta}\left(X_{i},\theta_{0}\right) \leq 2\sup_{\theta\in\Theta}\left|g\left(X_{i},\theta\right)\right|\leq 2G\left(X_{i}\right)$ by condition (3) and (4). Then
    \begin{equation*}
        E\Delta_{\delta}\left(X_{i},\theta_{0}\right)\rightarrow 0,\text{ as }\delta\rightarrow 0.
    \end{equation*}

    So, for all $\theta\in\Theta$ and $\varepsilon>0$, there exists $\delta_{\varepsilon}(\theta)$ such that
    \begin{equation*}
        E\left[\Delta_{\delta_{\varepsilon}(\theta)}\left(X_{i},\theta\right)\right]<\varepsilon.
    \end{equation*}

    Since $\Theta$ is compact, we can find a finite subcover, such that $\Theta$ is covered by
    \begin{equation*}
        \cup_{k=1}^{K}B\left(\theta_{k}, \delta_{\varepsilon}\left(\theta_{k}\right)\right).
    \end{equation*}

    \begin{equation*}
        \begin{aligned}
                 & \sup_{\theta\in\Theta}\left[n^{-1}\sum_{i=1}^{n}g\left(X_{i},\theta\right)-Eg\left(X_{i},\theta\right)\right]                                                                                                                                                             \\
            =    & \max_{k}\sup_{\theta\in B\left(\theta_{k},\delta_{\varepsilon}\left(\theta_{k}\right)\right)}\left[n^{-1}\sum_{i=1}^{n}g\left(X_{i},\theta\right)-Eg\left(X_{i},\theta\right)\right]                                                                                      \\
            \leq & \max_{k}\left[n^{-1}\sum_{i=1}^{n}\sup_{\theta\in B\left(\theta_{k},\delta_{\varepsilon}\left(\theta_{k}\right)\right)}g\left(X_{i},\theta\right)-E\inf_{\theta\in B\left(\theta_{k},\delta_{\varepsilon}\left(\theta_{k}\right)\right)}g\left(X_{i},\theta\right)\right] \\
        \end{aligned}.
    \end{equation*}

    Since
    \begin{equation*}
        E\left|\sup_{\theta\in B\left(\theta_{k},\delta_{c}\left(\theta_{k}\right)\right)}g\left(X_{i},\theta\right)\right|\leq EG\left(X_{i}\right)<\infty,
    \end{equation*}
    by the Weak Law of Large Numbers (Theorem \ref{thm:WLLN}),

    \begin{equation*}
        \begin{aligned}
            =    & o_{p}(1)+\max_{k}\left[E\sup_{\theta\in B\left(\theta_{k},\delta_{\varepsilon}\left(\theta_{k}\right)\right)}g\left(X_{i},\theta\right)-E\inf_{\theta\in B\left(\theta_{k},\delta_{\varepsilon}\left(\theta_{k}\right)\right)}g\left(X_{i},\theta\right)\right] \\
            =    & o_{p}(1)+\max_{k}E\Delta_{\delta_{\varepsilon}\left(\theta_{k}\right)}\left(X_{i},\theta_{k}\right)                                                                                                                                                             \\
            \leq & o_{p}(1)+\varepsilon
        \end{aligned}
    \end{equation*}

    By analogous argument,
    \begin{equation*}
        \inf_{\theta\in\Theta}\left[n^{-1}\sum_{i=1}^{n}g\left(X_{i},\theta\right)-Eg\left(X_{i},\theta\right)\right]\geq o_{p}(1)-\varepsilon.
    \end{equation*}

    The desired result follows from the above equation by the fact that $\varepsilon$ is chosen arbitrarily.
\end{proof}
